---
title: "RShiny Exercise 1 - Solutions"
author: "Jacques van Helden"
date: '`r Sys.Date()`'
output:
  html_document:
    self_contained: no
    fig_caption: yes
    highlight: zenburn
    theme: cerulean
    toc: yes
    toc_depth: 3
    toc_float: yes
    code_folding: "show"
  beamer_presentation:
    colortheme: dolphin
    fig_caption: yes
    fig_height: 6
    fig_width: 7
    fonttheme: structurebold
    highlight: tango
    incremental: no
    keep_tex: no
    slide_level: 2
    theme: Montpellier
    toc: yes
  revealjs::revealjs_presentation:
    theme: night
    transition: none
    self_contained: true
    css: ../slides.css
  pdf_document:
    fig_caption: yes
    highlight: zenburn
    toc: yes
    toc_depth: 3
  slidy_presentation:
    smart: no
    slide_level: 2
    self_contained: yes
    fig_caption: yes
    fig_height: 6
    fig_width: 7
    highlight: tango
    incremental: no
    keep_md: yes
    smaller: yes
    theme: cerulean
    toc: yes
    widescreen: yes
  ioslides_presentation:
    slide_level: 2
    self_contained: no
    colortheme: dolphin
    fig_caption: yes
    fig_height: 6
    fig_width: 7
    fonttheme: structurebold
    highlight: tango
    smaller: yes
    toc: yes
    widescreen: yes
font-import: http://fonts.googleapis.com/css?family=Risque
subtitle: "Diplôme Interuniversitaire en Bioinformatique intégrative (DU-Bii 2019)"
font-family: Garamond
transition: linear
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Introduction

Dans cet exercice, nous décvouvrons progressivement les différents éléments pour construire une interface R Shiny, en partant du plus simple et en élaborant progressivement. 

A chaque étape, on ajoute un élément d'interactivité.

Les solutions sont fournies dans des fichiers séparés (app1.R, app2.R, ...). Pour les exécuter, il suffit d'ouvrir le fichier app[#].R dans RStudio et de cliquer le biouton **Run App** qui apparaît dans le coin supérieur droit de l'éditeur de code. 

## 1. Starting application

Copy, debug and run the first application (app1) presented today.

```{r eval=FALSE, echo=TRUE}
ui <- fluidPage(
  titlePanel("Workshop - Example 1 – Basic  Histogram"),
  sidebarLayout(
    sidebarPanel(
       numericInput(inputId="n",
                    label="Number of observations",
                    value=1000) ),  
       mainPanel(plotOutput("plot"))
  )
)

server <- function(input, output) {
   data <- reactive({
                     x <- rnorm(input$n)
                     x })

   output$plot <- renderPlot({
         	        hist(data(), 50, main="",  xlab="x")
                   })
}
shinyApp(ui = ui, server = server)
```



Solution: [app1.R](app1.R)


## 2. Bin numbers

Change the application app1 to allow the user to enter the numbers of bins when plotting the histogram

Solution: [app2.R](app2.R)

## 3. Server response

Change the application app1 to add some text as a response from server. 

Solution: [app3.R](app3.R)

## 4. Mean and standard deviation

Change app1 so that

- The user can enter different values for the mean and standard deviation. 
- The mean and standard deviation are shown in the mainPanel.
- The user can enter a title for the histogram.

Solution: [app4.R](app4.R)

## 5. Alternative displays

Change app1 so that the user can choose to do a
histogram or a boxplot

Solution: [app5.R](app5.R)


## 6. Do it the way you want it

Just about anything can be made to look the way you want it.

- change the size of the sidebar: (,width=3)
- Change the aspect ratio of the graph:

```{r eval=FALSE}
plotOutput("plot", width = "500px", height = "500px")
```

Solution: [app6.R](app6.R)

## 7. Panel appears and disappears:

An ugly feature of our app: the input field Number of bins only makes sense for the histogram, not for the boxplot, so it should not appear when we do a boxplot.

**Hint:** `conditionalPanel()`


Solution: [app7.R](app7.R)

## 8. Predefined data sets

Let us read files on the server files. For this purpose, first we need to save the data sets in the same folder as ui.R and server.R, say with dump. Then we can read the data in the server with

```{r eval=FALSE}
if(input$dataset=="Newcomb's Speed of Light") {

            source("newcomb.R")

            return(newcomb)
}
```
 
**Your turn: Read the 3 data sets available on github**







